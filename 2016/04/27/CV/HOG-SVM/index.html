<!DOCTYPE html>
<html lang="en">
<head>
  
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

  <meta charset="utf-8">
  
  <title>Simple Object Classification with HOG and SVM | At A Loss What To Do</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Do object recognition with HOG feature and SVM classifier.[Usage]Training Algorithm Flow

manually select representive _sample_s to generate TrainSet and TestSet

Extract HOG feature for each samples">
<meta property="og:type" content="article">
<meta property="og:title" content="Simple Object Classification with HOG and SVM">
<meta property="og:url" content="http://idler1229.github.io/2016/04/27/CV/HOG-SVM/index.html">
<meta property="og:site_name" content="At A Loss What To Do">
<meta property="og:description" content="Do object recognition with HOG feature and SVM classifier.[Usage]Training Algorithm Flow

manually select representive _sample_s to generate TrainSet and TestSet

Extract HOG feature for each samples">
<meta property="og:image" content="http://idler1229.github.io/2016/04/27/CV/HOG-SVM/color.png">
<meta property="og:image" content="http://idler1229.github.io/2016/04/27/CV/HOG-SVM/depth.png">
<meta property="og:image" content="http://idler1229.github.io/2016/04/27/CV/HOG-SVM/regions.png">
<meta property="og:image" content="http://idler1229.github.io/2016/04/27/CV/HOG-SVM/classification.png">
<meta property="og:updated_time" content="2016-06-16T03:40:23.203Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Simple Object Classification with HOG and SVM">
<meta name="twitter:description" content="Do object recognition with HOG feature and SVM classifier.[Usage]Training Algorithm Flow

manually select representive _sample_s to generate TrainSet and TestSet

Extract HOG feature for each samples">
<meta name="twitter:image" content="http://idler1229.github.io/2016/04/27/CV/HOG-SVM/color.png">
  
    <link rel="alternative" href="/atom.xml" title="At A Loss What To Do" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
      <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">
  
  
      <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
      <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">
  
  <link rel="stylesheet" href="/css/style.css">
  
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
  
      <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">
  
  <script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
  <script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>
  <script>
      var yiliaConfig = {
          fancybox: true,
          animate: true,
          isHome: false,
          isPost: true,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false,
          fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
          scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
          search: true
      }
  </script>

  
      <script>
          yiliaConfig.jquery_ui = [true, "//cdn.bootcss.com/jqueryui/1.10.4/jquery-ui.min.js", "//cdn.bootcss.com/jqueryui/1.10.4/css/jquery-ui.min.css"];
      </script>
  

  
      <script>
          yiliaConfig.rootUrl = "/";
      </script>
  

  
      <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-574c8c98185175db"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  
  
</head>
<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/IDLER.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">_IDLER_</a></h1>
        </hgroup>

        
        <p class="header-subtitle">Idle About</p>
        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" results="0" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="true" />
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class='no-result'>No results found <i class='fa fa-spinner fa-pulse'></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>Menu</li>
                        <li>Tags</li>
                        
                        
                        <li>About Me</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">Home</a></li>
                        
                            <li><a href="/archives">Archives</a></li>
                        
                            <li><a href="/tags/">Tags</a></li>
                        
                            <li><a href="/about/">About</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:zyy34472@gmail.com" title="Email"></a>
                            
                                <a class="fa Weibo" target="_blank" href="http://weibo.com/YiyangCNM" title="Weibo"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/IDLER1229" title="GitHub"></a>
                            
                                <a class="fa LinkedIn" target="_blank" href="https://cn.linkedin.com/in/idler-chou" title="LinkedIn"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/3D/">3D</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/APUE/">APUE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AWK/">AWK</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithm/">Algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Allocator/">Allocator</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Book/">Book</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C-，-Applications/">C++， Applications</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C-，-Toys/">C++， Toys</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CVS/">CVS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cheat-Sheet/">Cheat Sheet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Code/">Code</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Compile/">Compile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Computer-Vision/">Computer Vision</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Desktop/">Desktop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Functor/">Functor</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Html/">Html</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IDE/">IDE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JAVA/">JAVA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JDK/">JDK</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Leetcode/">Leetcode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Markdown/">Markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ngnix/">Ngnix</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Note/">Note</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenCV/">OpenCV</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PCL/">PCL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pattern-Recognition/">Pattern Recognition</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Point-Cloud/">Point Cloud</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Problem/">Problem</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Programing-Language/">Programing Language</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Programming/">Programming</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Programming-Language/">Programming Language</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Project/">Project</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Realsense/">Realsense</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Recommendation/">Recommendation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Regular-Expression/">Regular Expression</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/STL/">STL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Security/">Security</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shell/">Shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shortcuts/">Shortcuts</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Software/">Software</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Solution/">Solution</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Source-Code/">Source Code</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Syntax/">Syntax</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tools/">Tools</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Toys/">Toys</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Trick/">Trick</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ubuntu/">Ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unsolve/">Unsolve</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web/">Web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows/">Windows</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Writer/">Writer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/e-mail/">e-mail</a></li></ul>
                    </div>
                </section>
                
                
                

                
                
                <section class="switch-part switch-part3">
                
                    <div id="js-aboutme">At a Loss What to Do</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">_IDLER_</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/IDLER.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">_IDLER_</a></h1>
            </hgroup>
            
            <p class="header-subtitle">Idle About</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">Home</a></li>
                
                    <li><a href="/archives">Archives</a></li>
                
                    <li><a href="/tags/">Tags</a></li>
                
                    <li><a href="/about/">About</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:zyy34472@gmail.com" title="Email"></a>
                            
                                <a class="fa Weibo" target="_blank" href="http://weibo.com/YiyangCNM" title="Weibo"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/IDLER1229" title="GitHub"></a>
                            
                                <a class="fa LinkedIn" target="_blank" href="https://cn.linkedin.com/in/idler-chou" title="LinkedIn"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="Tags" friends="Friends" about="About Me"/>
</nav>
      <div class="body-wrap"><article id="post-CV/HOG-SVM" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/04/27/CV/HOG-SVM/" class="article-date">
      <time datetime="2016-04-26T17:24:13.000Z" itemprop="datePublished">2016-04-27</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Simple Object Classification with HOG and SVM
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/Computer-Vision/">Computer Vision</a><a class="article-category-link" href="/categories/Computer-Vision/OpenCV/">OpenCV</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C-，-Applications/">C++， Applications</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Computer-Vision/">Computer Vision</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/OpenCV/">OpenCV</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Pattern-Recognition/">Pattern Recognition</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="Do-object-recognition-with-HOG-feature-and-SVM-classifier"><a href="#Do-object-recognition-with-HOG-feature-and-SVM-classifier" class="headerlink" title="Do object recognition with HOG feature and SVM classifier."></a>Do object recognition with HOG feature and SVM classifier.</h2><h3 id="Usage"><a href="#Usage" class="headerlink" title="[Usage]"></a>[Usage]</h3><h4 id="Training-Algorithm-Flow"><a href="#Training-Algorithm-Flow" class="headerlink" title="Training Algorithm Flow"></a>Training Algorithm Flow</h4><blockquote>
<ol>
<li><p>manually select representive _sample_s to generate <em>TrainSet</em> and <em>TestSet</em></p>
</li>
<li><p>Extract HOG feature for each samples either in <em>TrainSet</em> or in <em>TestSet</em></p>
</li>
<li><p>Attatch label to each <em>sample</em></p>
</li>
<li><p>Set parameters and train <em>Model</em> (you can determine save <em>Model</em> or not. If saved, <em>Model</em> will be saved into a XML file.) </p>
</li>
<li><p>Predict <em>sample</em>s in <em>TestSet</em> with SVM <em>Model</em></p>
</li>
</ol>
</blockquote>
<p>Training Example Code with EndToEnd<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">....</span><br><span class="line">....</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> dirPath = <span class="string">&quot;...&quot;</span></span><br><span class="line">HOG_SVM hog_svm;</span><br><span class="line">hog_svm.SetSvmParameter(....);</span><br><span class="line"><span class="keyword">float</span> result = hog_svm.EndToEnd(dirPath);</span><br><span class="line"></span><br><span class="line">....</span><br><span class="line">....</span><br></pre></td></tr></table></figure></p>
<h4 id="Predict-with-Model-in-in-practice"><a href="#Predict-with-Model-in-in-practice" class="headerlink" title="Predict with Model in  in practice:"></a>Predict with Model in  in practice:</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">....</span><br><span class="line">....</span><br><span class="line"></span><br><span class="line">Mat src = .... ;</span><br><span class="line"><span class="built_in">string</span> modelPath = <span class="string">&quot;...&quot;</span></span><br><span class="line">HOG_SVM hog_svm(modelPath);</span><br><span class="line"><span class="keyword">float</span> result = hog_svm.predict(src);</span><br><span class="line"></span><br><span class="line">....</span><br><span class="line">....</span><br></pre></td></tr></table></figure>
<h3 id="Example"><a href="#Example" class="headerlink" title="[Example]"></a>[Example]</h3><p>White rectangle bounding boxes denote the <em>topk</em> (which select <em>topk</em> Main Region with <em>Depth Segmentation Algorithm in the previous blog</em>) color candidate regions to calculate HOG features, which will be classified by an SVM classifier. The recognition results of the right image show that cuboid regions filtered by the classifier are marked red, while the rest white regions are removed from candidate regions after classifying.</p>
<table>
<thead>
<tr>
<th style="text-align:center"><em>Color</em></th>
<th style="text-align:center"><em>Depth</em></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="/2016/04/27/CV/HOG-SVM/color.png" alt="Color"></td>
<td style="text-align:center"><img src="/2016/04/27/CV/HOG-SVM/depth.png" alt="Depth"></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"><em>Regions</em></th>
<th style="text-align:center"><em>Classification</em></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="/2016/04/27/CV/HOG-SVM/regions.png" alt="Regions"></td>
<td style="text-align:center"><img src="/2016/04/27/CV/HOG-SVM/classification.png" alt="Classification"></td>
</tr>
</tbody>
</table>
<a id="more"></a>
<h3 id="Head-File"><a href="#Head-File" class="headerlink" title="[Head File]"></a>[Head File]</h3><h4 id="HOG-SVM-hpp"><a href="#HOG-SVM-hpp" class="headerlink" title="HOG-SVM.hpp"></a>HOG-SVM.hpp</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*******************************************************************************</span><br><span class="line">    Utilize HOG as feature, and SVM as machine learning model.</span><br><span class="line">*******************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="string">&quot;FileOperation.hpp&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> cv::Mat;</span><br><span class="line"><span class="keyword">using</span> cv::Size;</span><br><span class="line"><span class="keyword">using</span> cv::Ptr;</span><br><span class="line"><span class="keyword">using</span> cv::ml::SVM;</span><br><span class="line"><span class="keyword">using</span> cv::Ptr;</span><br><span class="line"><span class="keyword">using</span> cv::Algorithm;</span><br><span class="line"><span class="keyword">using</span> cv::HOGDescriptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> GroundTruth{</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> label;</span><br><span class="line">    <span class="built_in">string</span> imgname;</span><br><span class="line">    GroundTruth(<span class="keyword">int</span> c, <span class="built_in">string</span> path){</span><br><span class="line">        label = c;</span><br><span class="line">        imgname = path;</span><br><span class="line">    };</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> HOG_SVM: <span class="keyword">public</span> FileOperation</span><br><span class="line">{</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ptr&lt;SVM&gt; svm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/** @brief default constructor */</span></span><br><span class="line">    HOG_SVM();</span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * @brief HOG_SVM: load xml file as model</span><br><span class="line">     * @param model_path    xml loacation</span><br><span class="line">     */</span></span><br><span class="line">    HOG_SVM(<span class="built_in">string</span> model_path);</span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * @brief LoadModel: load xml file as model</span><br><span class="line">     * @param model_path    xml loacation</span><br><span class="line">     * @return success/ fail</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">LoadModel</span><span class="params">(<span class="built_in">string</span> model_path)</span></span>;</span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * @brief ExtractFeature: extract HOG feature</span><br><span class="line">     * @param Img   input source</span><br><span class="line">     * @param mrs   scaled size</span><br><span class="line">     * @return      feature vector</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function">Mat <span class="title">ExtractFeature</span><span class="params">(Mat Img, Size mrs)</span></span>;</span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * @brief GetDataSet: get dataset</span><br><span class="line">     * @param data_path     image location</span><br><span class="line">     * @return      feature matrix</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function">Mat <span class="title">GetDataSet</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; data_path)</span></span>;</span><br><span class="line">    <span class="function">Mat <span class="title">GetDataSet</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; data_path, <span class="built_in">vector</span>&lt;GroundTruth&gt;&amp; gt, <span class="keyword">int</span> c)</span></span>;</span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * @brief SetSvmParameter: set training Parameter</span><br><span class="line">     * @param sv_num    max support vectors number</span><br><span class="line">     * @param c_r_type  classification/ regression</span><br><span class="line">     * @param kernel    linear / gussian / ploy ...</span><br><span class="line">     * @param gamma     if gussian need to set</span><br><span class="line">     * @return          1</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">SetSvmParameter</span><span class="params">(<span class="keyword">int</span> sv_num, <span class="keyword">int</span> c_r_type, <span class="keyword">int</span> kernel, <span class="keyword">double</span> gamma)</span></span>;</span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * @brief Training: training with svm</span><br><span class="line">     * @param trainSet  train data mat</span><br><span class="line">     * @param label     label mat</span><br><span class="line">     * @param save      save model or not</span><br><span class="line">     * @param dir       save path</span><br><span class="line">     * @return          1</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">Training</span><span class="params">(Mat&amp; trainSet, Mat&amp; label, <span class="keyword">bool</span> save, <span class="built_in">string</span> dir)</span></span>;</span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * @brief Testing: if need to test, you can use this function</span><br><span class="line">     * @param testSet   test matirx</span><br><span class="line">     * @param gt        groundtruth, the othe impletementation is to show which are predicted error</span><br><span class="line">     * @return          1</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">Testing</span><span class="params">(Mat&amp; testSet, <span class="keyword">float</span> gt)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">Testing</span><span class="params">(Mat&amp; testSet, <span class="built_in">vector</span>&lt;GroundTruth&gt; gt)</span></span>;</span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * @brief EndToEnd: the whole process, training and testing</span><br><span class="line">     * @param data_path datapath</span><br><span class="line">     * @return  error rate in the test data</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">float</span> <span class="title">EndToEnd</span><span class="params">(<span class="built_in">string</span> data_path)</span></span>;</span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * @brief Predict: predict label in practical application</span><br><span class="line">     * @param image    image / region need to classify</span><br><span class="line">     * @return label</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">float</span> <span class="title">Predict</span><span class="params">(Mat&amp; image)</span></span>;</span><br><span class="line"></span><br><span class="line">};</span><br></pre></td></tr></table></figure>
<h4 id="FileOperation-hpp"><a href="#FileOperation-hpp" class="headerlink" title="FileOperation.hpp"></a>FileOperation.hpp</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*******************************************************************************</span><br><span class="line">    Some Files and Os Operation, such as open, read, write, etc</span><br><span class="line">*******************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Due to compile&apos;s  Named Return Value Optimization, directly return vector</span></span><br><span class="line"><span class="keyword">class</span> FileOperation{</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * @brief getFilename: get all files / subdirs Under dirpath</span><br><span class="line">     * @param dirPath</span><br><span class="line">     * @return subFiles</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">virtual</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; getFilename(<span class="keyword">const</span> <span class="built_in">string</span>&amp; dirPath) ;</span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * @brief getFilepath: get absolute path of files / subdirs Under dirpath</span><br><span class="line">     * @param dirPath</span><br><span class="line">     * @return absolutePaths</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">virtual</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; getFilepath(<span class="keyword">const</span> <span class="built_in">string</span>&amp; dirPath) ;</span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * @brief findFileName: filter out filename from absolute path</span><br><span class="line">     * @param path</span><br><span class="line">     * @return filename</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="built_in">string</span> <span class="title">findFileName</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span>&amp; path)</span> </span>;</span><br><span class="line">};</span><br></pre></td></tr></table></figure>
<h4 id="Marco-hpp"><a href="#Marco-hpp" class="headerlink" title="Marco.hpp"></a>Marco.hpp</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*******************************************************************************</span><br><span class="line">    Some efficient macros</span><br><span class="line">*******************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Mkdir if _DIR_ exist or not</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DIR_NOEXIST_AND_CREATE(_DIR_)	\</span><br><span class="line">        system((<span class="string">&quot;mkdir &quot;</span> + _DIR_).c_str())</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Calcuate time consuming</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> elapsed_time  ((clock()- start)*1.0/CLOCKS_PER_SEC)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Output Message with cout</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MESSAGE_COUT(_TYPE_,_INFO_)	\</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;[&quot;</span> &lt;&lt; _TYPE_ &lt;&lt; <span class="string">&quot;]\t&quot;</span> &lt;&lt; _INFO_ &lt;&lt; std::endl;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Exchange x and y of Point</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> POINT_CVT(P)	\</span><br><span class="line">    P.x ^= P.y;			\</span><br><span class="line">    P.y ^= P.x;			\</span><br><span class="line">    P.x ^= P.y;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Get Mat element in Vector</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DIM1TODIM2(I,J,V,ROW)	V[I*ROW+J]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Boundary detection</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BETWEEN(VAL,LOW,UP)	((VAL)&gt;(LOW)&amp;&amp;(VAL)&lt;(UP))</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//The point at the center of region</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MiddlePoint(RECT)	\</span><br><span class="line">    Point(RECT.x + (RECT.width &gt;&gt; 1), RECT.y + (RECT.height &gt;&gt; 1))</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_MIN(MAX, MIN, P, POS)	\</span><br><span class="line">    <span class="meta-keyword">if</span> (MAX.POS &lt; P.POS)	MAX.POS = P.POS;	\</span><br><span class="line">    <span class="meta-keyword">else</span> <span class="meta-keyword">if</span> (MIN.POS &gt; P.POS)	MIN.POS = P.POS;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Region_MAX_MIN(MAX, MIN, P)	\</span><br><span class="line">    MAX_MIN(MAX, MIN, P, x)			\</span><br><span class="line">    MAX_MIN(MAX, MIN, P, y)</span></span><br></pre></td></tr></table></figure>
<h3 id="Implementation"><a href="#Implementation" class="headerlink" title="Implementation"></a>Implementation</h3><h4 id="HOG-SVM-cpp"><a href="#HOG-SVM-cpp" class="headerlink" title="HOG-SVM.cpp"></a>HOG-SVM.cpp</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="string">&quot;HOG-SVM.hpp&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="string">&quot;Macro.hpp&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> cv;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> ml;</span><br><span class="line"></span><br><span class="line">HOG_SVM::HOG_SVM()</span><br><span class="line">{</span><br><span class="line">    svm = SVM::create();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">HOG_SVM::HOG_SVM(<span class="built_in">std</span>::<span class="built_in">string</span> model_path)</span><br><span class="line">{</span><br><span class="line">    svm = Algorithm::load&lt;SVM&gt;(model_path);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> HOG_SVM::LoadModel(<span class="built_in">std</span>::<span class="built_in">string</span> model_path)</span><br><span class="line">{</span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">try</span>{</span><br><span class="line">        svm = Algorithm::load&lt;SVM&gt;(model_path);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">catch</span> (<span class="built_in">std</span>::exception e){</span><br><span class="line">        MESSAGE_COUT(<span class="string">&quot;ERROR&quot;</span>, e.what())</span><br><span class="line">        flag = <span class="literal">false</span>;</span><br><span class="line">    }</span><br><span class="line">    return flag;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">Mat HOG_SVM::ExtractFeature(Mat Img, Size mrs)</span><br><span class="line">{</span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * @brief HOG_SVM::ExtractFeature</span><br><span class="line">        The story behind 1764</span><br><span class="line">        For example</span><br><span class="line">        window size is 64x64, block size is 16x16 and block setp is 8x8&#xA3;&#xAC;cell size is 8x8,</span><br><span class="line">        the block number window contained is (&#xA3;&#xA8;64-16&#xA3;&#xA9;/8+1)*((64-16)/8+1) = 7*7 = 49,</span><br><span class="line">        the cell number each block contained is (16/8)*(16/8) = 4</span><br><span class="line">        every cell can project 9 bin, and each bin related to 9 vector</span><br><span class="line">        so feature_dim  = B x C x N, and caulated result is  1764</span><br><span class="line">        (B is each window&apos;s blocks number, C is every block&apos;s cell number, n is bin number)</span><br><span class="line">     */</span></span><br><span class="line">    resize(Img, Img, mrs);</span><br><span class="line">    HOGDescriptor *hog = new HOGDescriptor(cvSize(<span class="number">64</span>, <span class="number">64</span>), cvSize(<span class="number">16</span>, <span class="number">16</span>), cvSize(<span class="number">8</span>, <span class="number">8</span>), cvSize(<span class="number">8</span>, <span class="number">8</span>), <span class="number">9</span>);</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">float</span>&gt; descriptors;</span><br><span class="line">    hog-&gt;compute(Img, descriptors, Size(<span class="number">1</span>, <span class="number">1</span>), Size(<span class="number">0</span>, <span class="number">0</span>));</span><br><span class="line">    return Mat(descriptors).t();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">Mat HOG_SVM::GetDataSet(<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; data_path)</span><br><span class="line">{</span><br><span class="line">    <span class="keyword">int</span> nImgNum = data_path.size();</span><br><span class="line">    <span class="keyword">int</span> success = <span class="number">0</span>;</span><br><span class="line">    Mat data_mat, src;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nImgNum; i++){</span><br><span class="line">        src = imread(data_path[i]);</span><br><span class="line">        <span class="keyword">if</span> (src.cols &amp;&amp; src.rows){</span><br><span class="line">            MESSAGE_COUT(<span class="string">&quot;PROCESS&quot;</span>, FileOperation::findFileName(data_path[i]) &lt;&lt; <span class="string">&quot;\t&quot;</span> &lt;&lt; success++)</span><br><span class="line">            Mat post = ExtractFeature(src, Size(<span class="number">64</span>, <span class="number">64</span>));</span><br><span class="line">            data_mat.push_back(post);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    return data_mat;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">Mat HOG_SVM::GetDataSet(<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; data_path, <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;GroundTruth&gt;&amp; gt, <span class="keyword">int</span> c)</span><br><span class="line">{</span><br><span class="line">    <span class="keyword">int</span> nImgNum = data_path.size();</span><br><span class="line">    <span class="keyword">int</span> success = <span class="number">0</span>;</span><br><span class="line">    Mat data_mat;	<span class="comment">//feature matrix</span></span><br><span class="line">    Mat src;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> imgname;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nImgNum; i++){</span><br><span class="line">        src = imread(data_path[i]);</span><br><span class="line">        <span class="keyword">if</span> (src.cols &amp;&amp; src.rows){</span><br><span class="line">            imgname = FileOperation::findFileName(data_path[i]);</span><br><span class="line">            MESSAGE_COUT(<span class="string">&quot;PROCESS&quot;</span>, imgname &lt;&lt; <span class="string">&quot;\t&quot;</span> &lt;&lt; success++)</span><br><span class="line">            Mat post = ExtractFeature(src, Size(<span class="number">64</span>, <span class="number">64</span>));</span><br><span class="line">            data_mat.push_back(post);</span><br><span class="line">            gt.push_back(GroundTruth(c, imgname));</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    return data_mat;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> HOG_SVM::SetSvmParameter(<span class="keyword">int</span> sv_num, <span class="keyword">int</span> c_r_type, <span class="keyword">int</span> kernel, <span class="keyword">double</span> gamma)</span><br><span class="line">{</span><br><span class="line">    TermCriteria criteria = TermCriteria(CV_TERMCRIT_EPS, sv_num, FLT_EPSILON);	<span class="comment">//max support vectocr 200</span></span><br><span class="line">    svm-&gt;setType(c_r_type);</span><br><span class="line">    svm-&gt;setKernel(kernel);</span><br><span class="line">    <span class="keyword">if</span> (kernel == SVM::RBF)	svm-&gt;setGamma(gamma);</span><br><span class="line">    svm-&gt;setTermCriteria(criteria);</span><br><span class="line">    return <span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> HOG_SVM::Training(Mat&amp; trainSet, Mat&amp; label, <span class="keyword">bool</span> save,<span class="built_in">std</span>::<span class="built_in">string</span> dir)</span><br><span class="line">{</span><br><span class="line">    SetSvmParameter(<span class="number">200</span>, SVM::C_SVC, SVM::LINEAR, <span class="number">0</span>);</span><br><span class="line">    Ptr&lt;TrainData&gt; traindata = ml::TrainData::create(trainSet, ROW_SAMPLE, label);</span><br><span class="line">    svm-&gt;train(traindata);</span><br><span class="line">    <span class="keyword">if</span> (save){</span><br><span class="line">        svm-&gt;save(dir+<span class="string">&quot;HOG-SVM-MODEL.xml&quot;</span>);</span><br><span class="line">    }</span><br><span class="line">    return <span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> HOG_SVM::Testing(Mat&amp; testSet, <span class="keyword">float</span> gt)</span><br><span class="line">{</span><br><span class="line">    <span class="keyword">int</span> error = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> postnum = testSet.rows;</span><br><span class="line">    Mat res = Mat::zeros(postnum, <span class="number">1</span>, CV_32FC1);</span><br><span class="line">    svm-&gt;predict(testSet, res);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; postnum; i++)</span><br><span class="line">        <span class="keyword">if</span> (res.at&lt;<span class="keyword">float</span>&gt;(i, <span class="number">0</span>) != gt)</span><br><span class="line">            error++;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; error &lt;&lt; <span class="string">&quot;/&quot;</span> &lt;&lt; postnum &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    return error;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> HOG_SVM::Testing(Mat&amp; testSet, <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;GroundTruth&gt; gt)</span><br><span class="line">{</span><br><span class="line">    <span class="keyword">int</span> error = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> postnum = testSet.rows;</span><br><span class="line">    Mat res = Mat::zeros(postnum, <span class="number">1</span>, CV_32FC1);</span><br><span class="line">    svm-&gt;predict(testSet, res);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; postnum; i++)</span><br><span class="line">        <span class="keyword">if</span> (res.at&lt;<span class="keyword">float</span>&gt;(i, <span class="number">0</span>) != gt[i].label){</span><br><span class="line">            MESSAGE_COUT(<span class="string">&quot;ERROR&quot;</span>, gt[i].imgname &lt;&lt; <span class="string">&quot;\t&quot;</span> &lt;&lt; gt[i].label)</span><br><span class="line">            error++;</span><br><span class="line">        }</span><br><span class="line">    MESSAGE_COUT(<span class="string">&quot;RESULT&quot;</span>, error &lt;&lt; <span class="string">&quot;/&quot;</span> &lt;&lt; postnum)</span><br><span class="line">    return error;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> HOG_SVM::Predict(Mat&amp; image)</span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span> (!image.rows)	return	<span class="number">-1</span>;</span><br><span class="line">    Mat gray;</span><br><span class="line">    cvtColor(image, gray, CV_BGR2GRAY);</span><br><span class="line">    Mat post = ExtractFeature(gray, Size(<span class="number">64</span>, <span class="number">64</span>));</span><br><span class="line">    gray.release();</span><br><span class="line">    return svm-&gt;predict(post);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> HOG_SVM::EndToEnd(<span class="built_in">std</span>::<span class="built_in">string</span> data_path)</span><br><span class="line">{</span><br><span class="line">    <span class="comment">//Trainset path</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> trainPath = data_path + <span class="string">&quot;train\\&quot;</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; trainPathPositive = <span class="keyword">this</span>-&gt;getFilepath(trainPath + <span class="string">&quot;1\\&quot;</span>);</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; trainPathNegative = <span class="keyword">this</span>-&gt;getFilepath(trainPath + <span class="string">&quot;-1\\&quot;</span>);</span><br><span class="line">    <span class="comment">//Testset path</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> testPath = data_path + <span class="string">&quot;test\\&quot;</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; testPathPositive = FileOperation::getCurrentDir(testPath + <span class="string">&quot;1\\&quot;</span>);</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; testPathNegative = FileOperation::getCurrentDir(testPath + <span class="string">&quot;-1\\&quot;</span>);</span><br><span class="line">    <span class="comment">//Get trainset</span></span><br><span class="line">    Mat trainSet, label;</span><br><span class="line">    Mat trainSetP = GetDataSet(trainPathPositive);</span><br><span class="line">    Mat labelP = Mat::ones(trainSetP.rows, <span class="number">1</span>, CV_32SC1);</span><br><span class="line">    Mat trainSetN = GetDataSet(trainPathNegative);</span><br><span class="line">    Mat labelN = Mat::ones(trainSetN.rows, <span class="number">1</span>, CV_32SC1)*(<span class="number">-1</span>);</span><br><span class="line">    trainSet.push_back(trainSetP);</span><br><span class="line">    trainSet.push_back(trainSetN);</span><br><span class="line">    label.push_back(labelP);</span><br><span class="line">    label.push_back(labelN);</span><br><span class="line">    <span class="comment">//Training model</span></span><br><span class="line">    Training(trainSet, label, <span class="literal">true</span>, data_path);</span><br><span class="line">    <span class="comment">//Testing mode</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;GroundTruth&gt; gtP, gtN;</span><br><span class="line">    Mat testSetP = GetDataSet(testPathPositive, gtP, <span class="number">1</span>);</span><br><span class="line">    Mat testSetN = GetDataSet(testPathNegative, gtN, <span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">int</span> error = Testing(testSetP, gtP) + Testing(testSetN, gtN);</span><br><span class="line">    return <span class="number">1.0f</span>*error / (testSetP.rows + testSetN.rows);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h4 id="FileOperation-cpp"><a href="#FileOperation-cpp" class="headerlink" title="FileOperation.cpp"></a>FileOperation.cpp</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="string">&quot;FileOperation.hpp&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> _WIN32</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;io.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> __linux</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; FileOperation::getFilename(<span class="keyword">const</span> <span class="built_in">string</span>&amp; dirPath)</span><br><span class="line">{</span><br><span class="line">    <span class="keyword">char</span> buff[<span class="number">1024</span>];</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; fileNames;</span><br><span class="line">    <span class="built_in">string</span> cmd = <span class="string">&quot;ls &quot;</span> + dirPath;</span><br><span class="line">    FILE* fstream = popen (cmd.c_str(), <span class="string">&quot;r&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span> (fgets(buff, sizeof(buff), fstream)) {</span><br><span class="line">        fileNames.push_back(<span class="built_in">string</span>(buff));</span><br><span class="line">        fileNames.back().back() = <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">    return fileNames;</span><br><span class="line">}</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> _WIN32</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; FileOperation::getFilepath(<span class="keyword">const</span> <span class="built_in">string</span>&amp; dirPath)</span><br><span class="line">{</span><br><span class="line">    <span class="keyword">long</span>  hFile = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">struct</span> <span class="keyword">_finddata_t</span> fileinfo;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> p;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; files;</span><br><span class="line">    <span class="keyword">if</span> ((hFile = _findfirst(p.assign(dirPath).append(<span class="string">&quot;\\*&quot;</span>).c_str(), &amp;fileinfo)) != <span class="number">-1</span>)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">if</span> (!(fileinfo.attrib &amp; _A_SUBDIR))</span><br><span class="line">                files.push_back(p.assign(dirPath).append(<span class="string">&quot;\\&quot;</span>).append(fileinfo.name));</span><br><span class="line">        } <span class="keyword">while</span> (_findnext(hFile, &amp;fileinfo) == <span class="number">0</span>);</span><br><span class="line">        _findclose(hFile);</span><br><span class="line">    }</span><br><span class="line">    return files;</span><br><span class="line">}</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; FileOperation::getFilepath(<span class="keyword">const</span> <span class="built_in">string</span>&amp; dirPath)</span><br><span class="line">{</span><br><span class="line">    <span class="keyword">char</span> buff[<span class="number">1024</span>];</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; filePaths;</span><br><span class="line">    <span class="built_in">string</span> cmd = <span class="string">&quot;ls &quot;</span> + dirPath;</span><br><span class="line">    FILE* fstream = popen (cmd.c_str(), <span class="string">&quot;r&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span> (fgets(buff, sizeof(buff), fstream)) {</span><br><span class="line">        <span class="function"><span class="built_in">string</span> <span class="title">filename</span><span class="params">(buff)</span></span>;</span><br><span class="line">        filename.back() = <span class="number">0</span>;</span><br><span class="line">        filePaths.push_back(dirPath + filename);</span><br><span class="line">    }</span><br><span class="line">    return filePaths;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> FileOperation::findFileName(<span class="keyword">const</span> <span class="built_in">string</span>&amp; path)</span><br><span class="line">{</span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 1</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = path.size() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">        <span class="keyword">if</span> (path[i] == <span class="string">&apos;/&apos;</span>)</span><br><span class="line">            return path.substr(i + <span class="number">1</span>);</span><br><span class="line">    return <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line">    <span class="keyword">int</span> i, last;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; path[i]; i++)</span><br><span class="line">        <span class="keyword">if</span> (path[i] == <span class="string">&apos;/&apos;</span>)</span><br><span class="line">            last = i;</span><br><span class="line">    return path.substr(last + <span class="number">1</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>Title:</span><a href="/2016/04/27/CV/HOG-SVM/">Simple Object Classification with HOG and SVM</a></p>
        <p><span>Author:</span><a href="/" title="Back to Homepage">_IDLER_</a></p>
        <!--
        <p><span>Created:</span>2016-04-27, 01:24:13</p>
        <p><span>Updated:</span>2016-06-16, 11:40:23</p>
        <p>
            <span>Full URL:</span><a class="post-url" href="/2016/04/27/CV/HOG-SVM/" title="Simple Object Classification with HOG and SVM">http://idler1229.github.io/2016/04/27/CV/HOG-SVM/</a>
            <span class="copy-path" data-clipboard-text="From http://idler1229.github.io/2016/04/27/CV/HOG-SVM/　　By _IDLER_" title="Copy Article&#39;s Link &amp; Author"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        -->
        <p>
            <span>License:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"CC BY-NC-SA 4.0"</a> Keep Link &amp; Author if Distribute.
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2016/04/27/CV/Segmentation-Region-Grow/">
                    Depth Segmentation
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2016/04/26/CV/Capture-picture-with-camera/">
                    Capture picture with camera
                </a>
            </div>
        
    </nav>


  
</article>

    <div id="toc" class="toc-article">
    <strong class="toc-title">Contents</strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Do-object-recognition-with-HOG-feature-and-SVM-classifier"><span class="toc-number">1.</span> <span class="toc-text">Do object recognition with HOG feature and SVM classifier.</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Usage"><span class="toc-number">1.1.</span> <span class="toc-text">[Usage]</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Training-Algorithm-Flow"><span class="toc-number">1.1.1.</span> <span class="toc-text">Training Algorithm Flow</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Predict-with-Model-in-in-practice"><span class="toc-number">1.1.2.</span> <span class="toc-text">Predict with Model in  in practice:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Example"><span class="toc-number">1.2.</span> <span class="toc-text">[Example]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Head-File"><span class="toc-number">1.3.</span> <span class="toc-text">[Head File]</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#HOG-SVM-hpp"><span class="toc-number">1.3.1.</span> <span class="toc-text">HOG-SVM.hpp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#FileOperation-hpp"><span class="toc-number">1.3.2.</span> <span class="toc-text">FileOperation.hpp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Marco-hpp"><span class="toc-number">1.3.3.</span> <span class="toc-text">Marco.hpp</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Implementation"><span class="toc-number">1.4.</span> <span class="toc-text">Implementation</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#HOG-SVM-cpp"><span class="toc-number">1.4.1.</span> <span class="toc-text">HOG-SVM.cpp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#FileOperation-cpp"><span class="toc-number">1.4.2.</span> <span class="toc-text">FileOperation.cpp</span></a></li></ol></li></ol></li></ol>
</div>
<style>
    .left-col .switch-btn {
        display: none;
    }
    .left-col .switch-area {
        display: none;
    }
</style>

<input type="button" id="tocButton" value="Hide"  title="Show or Hide Table of Contents">
<script>
    var valueHide = "Hide";
    var valueShow = "Show";

    if ($(".left-col").is(":hidden")) {
        $("#tocButton").attr("value", valueShow);
    }

    $("#tocButton").click(function() {
        if ($("#toc").is(":hidden")) {
            $("#tocButton").attr("value", valueHide);
            $("#toc").slideDown(320);
            $(".switch-btn, .switch-area").fadeOut(300);
        }
        else {
            $("#tocButton").attr("value", valueShow);
            $("#toc").slideUp(350);
            $(".switch-btn, .switch-area").fadeIn(500);
        }
    })

    if ($(".toc").length < 1) {
        $("#toc, #tocButton").hide();
        $(".switch-btn, .switch-area").show();
    }
</script>



    <script>
        $(document).ready(function() {
            $(".toc li a").mouseover(function() {
                var title = $(this).find('.toc-text').text();
                $(this).attr("title", title);
            });
        })
    </script>




    
<div class="share">
    

    
        <div class="addthis_sharing_toolbox"></div>
    
</div>







    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2016/04/27/CV/Segmentation-Region-Grow/" title="Pre: Depth Segmentation">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="Mini Archives"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2016/04/26/CV/Capture-picture-with-camera/" title="Next: Capture picture with camera">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/08/13/Recommendation/Tools/Geek-Tools/">Geek Tools</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/13/Recommendation/Tools/Secure-Code/">Secure Code [TODO]</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/10/Git/git-error/">Git Errors</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/08/Project/Registration/">✍ Registration</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/07/Linux/Solution/Hide-User-in-Ubuntu/">Hide User in Ubuntu</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/04/Cheat Sheet/Regular-Expressions/">Regular Expressions</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/13/Recommendation/Nginx/Taohui/">Nginx -- 《深入理解Nginx》作者-陶辉 访谈摘要</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/04/Cheat Sheet/SQL/">SQL</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/26/Programming/C++/Recommendation/Awesome-C++/">Recommendation -- Awesome C++</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/26/Programming/JAVA/Top10-Mistakes/">Top 10 Mistakes Java Developers Make</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/14/Toys/Leetcode/ValidNumber/">Leetcode -- Valid Number</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/13/Toys/C/Noloop/">No loop</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/03/Linux/Solution/Shortcuts-Backup/">Shortcuts Backup</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/01/Toys/Shell/Send-Email/">Cmd Send E-mail</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/01/Toys/Html/Refresh-Page/">Refresh Page</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/01/Toys/Shell/Cmd-Login/">Cmd Login</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/01/Linux/Shell/Convert/">Convert</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/31/Writer/Markdown/Markdown-Note/">Markdown Note</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/31/Programming/AWK/awk/">AWK NOTE</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/30/Project/Crawl/">✍ Idle-About</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/30/STL/STL-ALLOCATOR-CONSTRCUT/">STL ALLOCATOR CONSTRCUT</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/30/STL/STL-ALLOCATOR/">STL ALLOCATOR [TODO]</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/29/STL/STL-ALGO-FUNCTOR/">STL ALGO FUNCTOR</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/29/Linux/Software/Qt-Creator-Shotcuts/">Qt Creator Shotcuts</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/29/STL/STL-ALGO-BASE/">STL ALGO BASE</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/29/Compile/CMake/">CMake Manual [TODO]</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/29/STL/STL-ALGO-NUMERIC/">STL ALGO NUMERIC</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/28/Linux/APUE/">APUE</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/28/Linux/Shell/Leetcode-Shell/">Leetcode Shell</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/28/Programming/C++/const-cast/">const_cast [TODO]</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/27/CV/Video-Capture/">Video Capture</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/27/Linux/Shell/Filename-remove-blank/">Filename remove blank</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/27/CV/Segmentation-Region-Grow/">Depth Segmentation</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/27/CV/HOG-SVM/">Simple Object Classification with HOG and SVM</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/26/CV/Capture-picture-with-camera/">Capture picture with camera</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/26/CV/Split-Video/">Split Video</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/26/STL/STL-ALGO-SET-OP/">STL ALGO SET OPERATION</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/26/Books/Reading-Books/">✍ Reading Books</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/26/CV/OpenCV3-0-RealSense-Configuration/">OpenCV3.0-RealSense-Configuration</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/26/Linux/Solution/Gedit-gibberish-onscreen/">Gedit Garbled</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/26/Programming/JAVA/Configure-JDK-on-Linux/">Configure JDK on Linux</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/26/Linux/Solution/Linux-Add-Fonts/">Linux Add Fonts</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/26/Programming/C/C-Trick/">C Trick</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/26/Programming/C++/CPP-Trick/">C++ Trick</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/26/Linux/Solution/Laptop-cannot-wakeup/">Laptop cannot wakeup</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/26/Linux/Software/Split-Screen/">Split Screen</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/26/Linux/Software/Take-a-Break/">Take A Break</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/26/Linux/Solution/What-the-fuck-on-Ubuntu/">What the fuck on Ubuntu</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/26/Linux/Shell/Linux-cmd/">Linux Command Miscellaneous</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/16/CV/PCL-Configuration/">PCL Configuration</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/15/Compile/CMake-Note/">CMake Note</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/10/CV/Realsense-Q-A/">Realsense Q&A</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/10/Problems/Problems/">Problems</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/06/Linux/Solution/Beyond-Compare-Crack/">Beyond Compare Crack</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/04/Linux/Software/Use-f-lux-to-protect-eyes/">Use f.lux to protect eyes</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/02/Linux/Shell/Pic2Pdf/">Picture batch to Pdf</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/02/Linux/Shell/Shell-Maze/">Pic2Pdf</a></li></ul>




    <script>
        
    </script>

</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016 _IDLER_
            </div>
            <div class="footer-right">
                <!--<a href="http://hexo.io/" target="_blank" title="A fast, simple &amp; powerful blog framework">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="Another simple and elegant theme for Hexo  v3.0">Yelee</a>--> modified by _IDLER_</i>
            </div>
        </div>
        
    </div>
</footer>

    </div>
    
    <script src="/js/GithubRepoWidget.js"></script>

<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 75;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>




    <script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#" title="Back to Top"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" title="Comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="Go to Bottom"><i class="fa fa-arrow-down"></i></a>
</div>
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>